<h1>Meus Artigos Enviados</h1>

<p>
  <%= link_to "Enviar Novo Artigo", new_article_path, class: "btn btn-secondary" %>
</p>

<hr>

<% if @student_articles.any? %>
  <table class="table table-hover" style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="background-color: #f2f2f2;">
        <th style="padding: 8px;">Título</th>
        <th style="padding: 8px;">Data de Envio</th>
        <th style="padding: 8px;">Status</th>
        <th style="padding: 8px;">Ações</th>
      </tr>
    </thead>
<%# app/views/dashboard/student.html.erb %>

<tbody>
  <% @student_articles.each do |article| %>
    <tr>
      <td style="padding: 8px; vertical-align: middle;"><%= article.title %></td>
      <td style="padding: 8px; vertical-align: middle;"><%= article.created_at.strftime("%d/%m/%Y") %></td>
      <td style="padding: 8px; vertical-align: middle;"><%= article.status.humanize %></td>
      
      <%# Célula de Ações: usamos d-flex e gap-2 para alinhar os ícones horizontalmente com um pequeno espaço %>
      <td style="padding: 8px; vertical-align: middle;" class="d-flex gap-2">
        
        <%# Botão "Ver Detalhes" com ícone e tooltip %>
        <%= link_to article, class: "btn btn-sm btn-info", data: { bs_toggle: 'tooltip', bs_placement: 'top', bs_title: 'Ver Detalhes' } do %>
          <i class="bi bi-eye-fill"></i>
        <% end %>

        <%# Lógica para mostrar botões de Editar e Excluir apenas para artigos pendentes %>
        <% if article.pendente? %>
          <%# Botão "Editar" com ícone e tooltip %>
          <%= link_to edit_article_path(article), class: "btn btn-sm btn-warning", data: { bs_toggle: 'tooltip', bs_placement: 'top', bs_title: 'Editar' } do %>
            <i class="bi bi-pencil-fill"></i>
          <% end %>

          <%# Botão "Excluir" com ícone e tooltip %>
          <%= button_to article_path(article), method: :delete, class: "btn btn-sm btn-danger", form: { data: { turbo_confirm: 'Tem a certeza que deseja excluir este artigo?' } }, data: { bs_toggle: 'tooltip', bs_placement: 'top', bs_title: 'Excluir' } do %>
            <i class="bi bi-trash-fill"></i>
          <% end %>
        <% end %>
      </td>
    </tr>
  <% end %>
</tbody>
  </table>
<% else %>
  <p>Você ainda não enviou nenhum artigo.</p>
<% end %>